{% extends "site_data_content.html" %}
{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
{{super()}}
{% endblock %}
{% block data_content %}
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<div class="row">
    {% for sub in subs %}
        <div class="col-md-3">
            <ul class="list-group">
            <li class="list-group-item active" aria-current="true">{{ sub['period'] }}</li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
            All
            <span class="badge bg-primary rounded-pill">{{ sub['all'] }}</span>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
            In use
            <span class="badge bg-primary rounded-pill">{{ sub['in_use'] }}</span>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
            Active
            <span class="badge bg-primary rounded-pill">{{ sub['active'] }}</span>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
            Average life
            <span class="badge bg-primary rounded-pill">{{ sub['average_life'] }} days</span>
        </li>
        </ul>
        </div>
    {% endfor %}
    
</div >
<div class="row">
    <div class="chart" id="line">
    <script>
        var layout = {
            title: "Income from new usd sudscriptions.",
            showlegend: false,
            xaxis: {
                title: {
                    text: 'Date'
                },
            },
            yaxis: {
                title: {
                text: 'Income in usd'
                }
            }
        };

        Plotly.newPlot('line', {{ graph_data | safe }}, layout, {displayModeBar: false, scrollZoom: true});
    </script>
    </div>
</div>
{% endblock %}